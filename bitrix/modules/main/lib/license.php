<? namespace Bitrix\Main;$GLOBALS['____1211128689']= array(base64_decode(''.'Zm'.'lsZV9leGlzdHM='),base64_decode('c3Ry'.'dG91c'.'HBlcg='.'='),base64_decode('bWQ1'),base64_decode('bWQ'.'1'),base64_decode('aW'.'5'.'fY'.'XJyY'.'Xk='),base64_decode('aW5'.'fY'.'XJ'.'yYX'.'k='),base64_decode('Z'.'G'.'VmaW'.'5lZA'.'='.'='),base64_decode('ZGVmaW5lZA=='),base64_decode('Z'.'G'.'Vm'.'aW5lZA'.'=='),base64_decode('ZmlsZV9l'.'eG'.'lzdHM='),base64_decode('Zml'.'sZV9l'.'eG'.'lzdHM='),base64_decode('Z'.'mlsZV'.'9'.'l'.'eGlzdH'.'M='),base64_decode('ZmlsZV'.'9leGlzdHM='),base64_decode(''.'ZXhwb'.'G9kZQ=='));if(!function_exists(__NAMESPACE__.'\\___778473320')){function ___778473320($_902164089){static $_581932210= false; if($_581932210 == false) $_581932210=array('L'.'2JpdHJp'.'e'.'C9'.'saWNlb'.'nNlX'.'2tle'.'S5w'.'aHA=','','',''.'R'.'EVNTw==','REVNT'.'w==','QklUUklY',''.'TE'.'lDR'.'U5DR'.'Q==','REVNTw==','L'.'2tleV91c'.'G'.'Rhd'.'G'.'UucGhwP'.'2xpY2Vu'.'c2V'.'fa'.'2V5PQ'.'==','JnRv'.'YmFza'.'2V0PXkmbGFuZz0=',''.'aHR0cHM6'.'L'.'y9'.'kZX'.'Y'.'u'.'MWMtY'.'ml0'.'cml4Ln'.'J1L'.'2xlY'.'XJuaW'.'5nL2NvdXJ'.'zZS9pb'.'mR'.'le'.'C'.'5waHA/Q'.'09VUlN'.'FX0'.'lEPTEzNSZM'.'RVN'.'TT'.'05'.'fS'.'UQ9MjU3Mj'.'A=',''.'a'.'HR0'.'cH'.'M6'.'L'.'y9'.'0cmFpbmlu'.'Zy5iaXRy'.'aXgy'.'N'.'C5jb2'.'0vc3Vw'.'c'.'G9y'.'dC90'.'cmFpb'.'mluZ'.'y9jb3Vy'.'c2UvaW'.'5kZ'.'Xgu'.'c'.'GhwP0'.'N'.'PV'.'VJTRV9'.'JR'.'D0xN'.'zgm'.'TEVTU09OX0'.'lEP'.'TI1O'.'T'.'My'.'JkxFU1N'.'PTl9QQVR'.'IPTE3NTI'.'wLj'.'E'.'3'.'N'.'TY'.'yLjI1OTMwLjI1'.'O'.'TMy','c'.'nU=','Ynk=','a3o'.'=','ZGU=','Z'.'XU=','Z'.'nI=','cGw=','aXQ'.'=','dWs=',''.'Z'.'XU'.'=','Y29t','Z'.'W'.'4=','RE'.'VNTw==',''.'WQ==','VElNRUx'.'JTU'.'lUX'.'0'.'V'.'ESVRJT04=','W'.'Q='.'=','RU'.'5DT0RF','WQ='.'=','U2l0Z'.'UV4cGl'.'yZURhdGU=','bWFpbg'.'==','fnN1'.'c'.'HBv'.'cnRfZml'.'uaXNoX2Rh'.'d'.'GU=','WS1tL'.'W'.'Q=','WS1tLWQ'.'=','Yml0cml4MjQ=','b'.'WFpbg='.'=',''.'flBBUkFNX0NMSUVOVF9'.'M'.'QU5H','','aW50cmF'.'uZ'.'XQ=','ZW4'.'=','cnU=','bWFpb'.'g==',''.'dmV'.'uZG9'.'y','Yml'.'0cml4X3B'.'v'.'cnRhb'.'A'.'==','Yml0'.'cml4',''.'ZW4=',''.'MWNfYml0cm'.'l4X3Bvc'.'nRhb'.'A==','MWNf'.'Yml0c'.'ml'.'4',''.'cn'.'U=','L2JpdHJ'.'peC9tb2R'.'1bG'.'VzL21'.'haW4vbGFuZ'.'y'.'9'.'1Y'.'Q'.'==','dWE=','L2Jpd'.'H'.'Jp'.'e'.'C9t'.'b'.'2R1bGVzL2'.'1h'.'aW4vb'.'GFuZy9i'.'e'.'Q'.'==',''.'Ynk=','L2J'.'p'.'d'.'HJpeC9tb2R1bGVzL21ha'.'W'.'4'.'vbGFuZy'.'9r'.'eg==','a3o=','L'.'2'.'JpdHJpe'.'C9'.'tb2R1bGVzL21h'.'a'.'W4vbGFu'.'Zy9ydQ'.'==','c'.'nU=','bWFpbg==','flBB'.'UkFNX'.'1BBUlRORVJfSUQ=','bW'.'F'.'pb'.'g==','UEFS'.'QU1fTUFYX'.'1VTRV'.'J'.'T','bWF'.'pbg==','fk'.'NPVU5UX0V'.'Y'.'VFJ'.'B','Tg==',''.'WQ==','Z'.'Xh0cmF'.'uZXQ=','QU5EIF'.'UuTEFTVF9MT0dJTiA+IA'.'==','QU5EIFUuTEFTVF9MT0dJTiBJ'.'UyBOT1QgTlV'.'MTA==','a'.'W50c'.'m'.'FuZX'.'Q=','ZX'.'h0cmFuZXQ=','ZXh0cm'.'Fu'.'ZXRfZ3Jvd'.'XA=','b'.'WFpbg==','fmxp'.'Y2Vuc'.'2V'.'fb'.'mFtZQ==','bWFpbg'.'==',''.'fm'.'xpY2'.'Vuc2'.'VfY29kZX'.'M=','','LA==');return base64_decode($_581932210[$_902164089]);}}; use Bitrix\Main\Config\Option; use Bitrix\Main\Type\Date; final class License{ private?string $_456132064= null; private?string $_1436041907= null; private const DOMAINS_STORE_LICENSE=[ 'ru' => 'https://util.1c-bitrix.ru', 'en' => 'https://util.bitrixsoft.com', 'kz' => 'https://util.1c-bitrix.kz', 'by' => 'https://util.1c-bitrix.by',]; public const URL_BUS_EULA=[ 'ru' => 'https://www.1c-bitrix.ru/download/law/eula_bus.pdf', 'by' => 'https://www.1c-bitrix.by/download/law/eula_bus.pdf', 'kz' => 'https://www.1c-bitrix.kz/download/law/eula_bus.pdf',]; public const URL_CP_EULA=[ 'ru' => 'https://www.1c-bitrix.ru/download/law/eula_cp.pdf', 'by' => 'https://www.1c-bitrix.by/download/law/eula_cp.pdf', 'kz' => 'https://www.1c-bitrix.kz/download/law/eula_cp.pdf', 'en' => 'https://www.bitrix24.com/eula/', 'br' => 'https://www.bitrix24.com.br/eula/', 'fr' => 'https://www.bitrix24.fr/eula/', 'pl' => 'https://www.bitrix24.pl/eula/', 'it' => 'https://www.bitrix24.it/eula/', 'la' => 'https://www.bitrix24.es/eula/',]; public const URL_RENEWAL_LICENSE=[ 'com' => 'https://store.bitrix24.com/profile/license-keys.php', 'eu' => 'https://store.bitrix24.eu/profile/license-keys.php', 'de' => 'https://store.bitrix24.de/profile/license-keys.php', 'ru' => 'https://www.1c-bitrix.ru/buy/products/b24.php#tab-section-2', 'by' => 'https://www.1c-bitrix.by/buy/products/b24.php#tab-section-2', 'kz' => 'https://www.1c-bitrix.kz/buy/products/b24.php#tab-section-2',]; private const CIS=['ru' => 1, 'by' => 1, 'kz' => 1, 'uz' => 1, 'kg' => 1, 'am' => 1, 'az' => 1, 'ge' => 1]; public function getKey(): string{ if($this->_456132064 === null){ $_1510013194= Loader::getDocumentRoot(). ___778473320(0); $LICENSE_KEY= ___778473320(1); if($GLOBALS['____1211128689'][0]($_1510013194)){ include($_1510013194);} $this->_456132064=($LICENSE_KEY == ___778473320(2) || $GLOBALS['____1211128689'][1]($LICENSE_KEY) == ___778473320(3)? ___778473320(4): $LICENSE_KEY);} return $this->_456132064;} public function getHashLicenseKey(): string{ return $GLOBALS['____1211128689'][2]($this->getKey());} public function getPublicHashKey(): string{ return $GLOBALS['____1211128689'][3](___778473320(5). $this->getKey(). ___778473320(6));} public function isDemoKey(): bool{ return $this->getKey() == ___778473320(7);} public function getBuyLink(): string{ return $this->getDomainStoreLicense(). ___778473320(8). $this->getHashLicenseKey(). ___778473320(9). LANGUAGE_ID;} public function getDocumentationLink(): string{ if($this->isCis()){ return ___778473320(10);} return ___778473320(11);} public function getRenewalLink(): string{ $_1436041907= $this->getRegion(); if($GLOBALS['____1211128689'][4]($_1436041907,[___778473320(12), ___778473320(13), ___778473320(14), ___778473320(15)])){ return self::URL_RENEWAL_LICENSE[$_1436041907];} if($GLOBALS['____1211128689'][5]($_1436041907,[___778473320(16), ___778473320(17), ___778473320(18), ___778473320(19), ___778473320(20)])){ return self::URL_RENEWAL_LICENSE[___778473320(21)];} return self::URL_RENEWAL_LICENSE[___778473320(22)];} public function getDomainStoreLicense(): string{ return self::DOMAINS_STORE_LICENSE[$this->getRegion()] ?? self::DOMAINS_STORE_LICENSE[___778473320(23)];} public function isDemo(): bool{ return $GLOBALS['____1211128689'][6](___778473320(24)) && DEMO === ___778473320(25);} public function isTimeBound(): bool{ return $GLOBALS['____1211128689'][7](___778473320(26)) && TIMELIMIT_EDITION === ___778473320(27);} public function isEncoded(): bool{ return $GLOBALS['____1211128689'][8](___778473320(28)) && ENCODE === ___778473320(29);} public function getExpireDate():?Date{ $_1363875723= (int)($GLOBALS[___778473320(30)] ??(934-2*467)); if($_1363875723>(1416/2-708)){ return Date::createFromTimestamp($_1363875723);} return null;} public function getSupportExpireDate():?Date{ $_1363875723= Option::get(___778473320(31), ___778473320(32)); if(Date::isCorrect($_1363875723, ___778473320(33))){ return new Date($_1363875723, ___778473320(34));} return null;} public function isCis(): bool{ return isset(self::CIS[$this->getRegion()]);} public function getRegion():?string{ if($this->_1436041907 === null){ if(Loader::includeModule(___778473320(35))){ $this->_1436041907= \CBitrix24::getPortalZone();} else{ $_1436041907= Option::get(___778473320(36), ___778473320(37)); if(empty($_1436041907)){ $_1436041907= $this->__1698848565(); if(empty($_1436041907)){ $_1436041907= $this->__342983007();}} $this->_1436041907= $_1436041907 ?? ___778473320(38);}} return $this->_1436041907?: null;} public function getEulaLink(): string{ if(ModuleManager::isModuleInstalled(___778473320(39))){ return self::URL_CP_EULA[$this->getRegion()] ?? self::URL_CP_EULA[___778473320(40)];} return self::URL_BUS_EULA[$this->getRegion()] ?? self::URL_BUS_EULA[___778473320(41)];} private function __1698848565():?string{ $_585596582= Option::get(___778473320(42), ___778473320(43)); if($_585596582 === ___778473320(44) || $_585596582 === ___778473320(45)){ return ___778473320(46);} if($_585596582 === ___778473320(47) || $_585596582 === ___778473320(48)){ return ___778473320(49);} return null;} private function __342983007():?string{ $_828471778= Application::getDocumentRoot(); if($GLOBALS['____1211128689'][9]($_828471778. ___778473320(50))){ return ___778473320(51);} if($GLOBALS['____1211128689'][10]($_828471778. ___778473320(52))){ return ___778473320(53);} if($GLOBALS['____1211128689'][11]($_828471778. ___778473320(54))){ return ___778473320(55);} if($GLOBALS['____1211128689'][12]($_828471778. ___778473320(56))){ return ___778473320(57);} return null;} public function getPartnerId(): int{ return (int)Option::get(___778473320(58), ___778473320(59),(160*2-320));} public function getMaxUsers(): int{ return (int)Option::get(___778473320(60), ___778473320(61),(878-2*439));} public function isExtraCountable(): bool{ return Option::get(___778473320(62), ___778473320(63), ___778473320(64)) === ___778473320(65) && ModuleManager::isModuleInstalled(___778473320(66));} public function getActiveUsersCount(Date $_1722688826= null): int{ $_1120391965= Application::getConnection(); $_468088550=(240*2-480); if($_1722688826 !== null){  $_590658042= ___778473320(67).$_1120391965->getSqlHelper()->convertToDbDate($_1722688826);} else{  $_590658042= ___778473320(68);} if(ModuleManager::isModuleInstalled(___778473320(69))){ $_617994389="
				SELECT COUNT(DISTINCT U.ID)
				FROM
					b_user U
					INNER JOIN b_user_field F ON F.ENTITY_ID = 'USER' AND F.FIELD_NAME = 'UF_DEPARTMENT'
					INNER JOIN b_utm_user UF ON
						UF.FIELD_ID = F.ID
						AND UF.VALUE_ID = U.ID
						AND UF.VALUE_INT > 0
				WHERE U.ACTIVE = 'Y'
					{$_590658042}
			"; $_468088550= (int)$_1120391965->queryScalar($_617994389); $_1371322837= (int)Option::get(___778473320(70), ___778473320(71)); if($_1371322837>(1324/2-662) && $this->isExtraCountable()){ $_617994389="
						SELECT COUNT(1)
						FROM
							b_user U
							INNER JOIN b_extranet_user EU ON EU.USER_ID = U.ID AND EU.CHARGEABLE = 'Y'
							INNER JOIN b_user_group UG ON UG.USER_ID = U.ID AND UG.GROUP_ID = {$_1371322837}
							LEFT JOIN (
								SELECT UF.VALUE_ID 
								FROM 
									b_user_field F
									INNER JOIN b_utm_user UF ON UF.FIELD_ID = F.ID AND UF.VALUE_INT > 0
								WHERE F.ENTITY_ID = 'USER' AND F.FIELD_NAME = 'UF_DEPARTMENT'
							) D ON D.VALUE_ID = U.ID
						WHERE U.ACTIVE = 'Y'
							{$_590658042}
							AND D.VALUE_ID IS NULL
					"; $_468088550 += (int)$_1120391965->queryScalar($_617994389);}} return $_468088550;}  public function getName(): string{ return Option::get(___778473320(72), ___778473320(73));}  public function getCodes(): array{ $_497755399= Option::get(___778473320(74), ___778473320(75)); if($_497755399 != ___778473320(76)){ return $GLOBALS['____1211128689'][13](___778473320(77), $_497755399);} return[];}}?>